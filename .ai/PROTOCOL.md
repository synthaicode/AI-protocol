---
status: draft
created: 2026-01-01
awaiting_review:
  - 全体構成の妥当性
  - ファイル参照関係の正確性
---

# AI協働プロトコル - 運用ルール

## 概要

本プロトコルは、人間とAIの協働における原則と手順を定義するものである。

### 基本思想

- **Micromanagementしない** - 詳細な手順ではなく、ガードレール（境界線）で制御
- **言葉で制御する** - AIの語彙を統一し、認識と行動を揃える
- **ドキュメント管理はAIの責任** - 会話から決定事項を抽出・記録

## ファイル構成

```
.ai/
├── PROTOCOL.md          # 本ファイル：全体の運用ルール（エントリーポイント）
├── SOURCE_TAGS.md       # 出所タグ仕様
├── BEHAVIOR.md          # ふるまい原則
├── REQUIREMENTS.md      # 要求→要件変換ルール
└── context/
    ├── GLOSSARY.md      # 用語集（プロジェクト単位）
    ├── {project}.md     # プロジェクト固有情報
    └── LOG.md           # ステートフル管理（決定履歴・保留事項）
```

## 各ファイルの役割と参照関係

| ファイル | 内容 | 参照先 | 更新頻度 |
|----------|------|--------|----------|
| PROTOCOL.md | 他ファイルの参照関係、運用の全体像 | 全ファイル | 稀 |
| SOURCE_TAGS.md | [明示][推論][仮定][補完]の定義と運用 | - | 稀 |
| BEHAVIOR.md | ふるまい原則（5軸 + 用語集準拠 + エスカレーション） | GLOSSARY.md, REQUIREMENTS.md | 低 |
| REQUIREMENTS.md | 要求理解→制約照合→要件化の手順 | GLOSSARY.md, LOG.md | 低 |
| context/GLOSSARY.md | 正式用語、別名、定義、出所 | SOURCE_TAGS.md | 中（常時監視） |
| context/LOG.md | 決定履歴、保留事項、解消済み | - | 高 |
| context/{project}.md | プロジェクト固有の決定事項、制約 | GLOSSARY.md | 高 |

## 運用フロー

### 1. セッション開始時

AIは以下のファイルを読み込む：

1. `PROTOCOL.md` - 運用ルールの確認
2. `GLOSSARY.md` - 用語の確認
3. `LOG.md` - 前回からの継続事項、保留事項の確認
4. `{project}.md` - プロジェクト固有情報の確認（該当する場合）

### 2. 要求受付時

1. `REQUIREMENTS.md` に従い、要求を理解・照合・要件化
2. `GLOSSARY.md` の用語で聞き返し・出力
3. 必要に応じて `BEHAVIOR.md` のエスカレーションルールに従い確認

### 3. 作業実行時

1. `BEHAVIOR.md` の原則に従い行動
2. `SOURCE_TAGS.md` に従い情報の出所を明示
3. 不確実性がある場合は [仮定] タグで明示

### 4. セッション終了時

AIは以下を更新：

1. `LOG.md` - 決定事項の記録、保留事項の登録
2. `GLOSSARY.md` - 新出用語の提案
3. `{project}.md` - プロジェクト固有情報の更新

## ステータス管理

### ファイルのステータス

各ファイルのフロントマターに以下を記載：

```yaml
---
status: draft | approved | pending | outdated
created: YYYY-MM-DD
pending_reason: （pendingの場合）理由
pending_until:
  - 条件1
  - 条件2
awaiting_review:
  - レビュー対象項目1
  - レビュー対象項目2
---
```

| status | 意味 | AIの扱い |
|--------|------|----------|
| draft | 未承認 | 参照可、確定情報としては使わない |
| approved | 承認済み | 確定情報として使用 |
| pending | 保留（判断先送り） | 参照しない、条件充足で再提示 |
| outdated | 要更新 | 更新提案を出す |

### 保留事項の再提示

- 日付ベースではなく**条件ベース**で管理
- `pending_until` の条件が満たされたらAIが能動的に再提示
- 例：「デプロイ先が決定」という条件が満たされたら、関連する保留項目を提示

## 原則の適用優先順位

複数の原則・ルールが競合した場合、以下の優先順位で判断：

1. **安全性** - リスクのある操作は必ず確認
2. **明示的な指示** - ユーザーの直接的な指示
3. **既存の決定** - LOG.md に記録された決定事項
4. **ふるまい原則** - BEHAVIOR.md の原則
5. **一般的なベストプラクティス**

## AIの責任範囲

### AIが自律的に行うこと

- 用語集の監視と提案
- 決定事項の記録
- 保留条件の監視と再提示
- ドキュメントの構造化と整理
- 出所タグの付与

### 人間の承認が必要なこと

- 新規用語の正式採用
- 重要な決定事項の確定
- ステータスの approved への変更
- 既存決定の変更・削除

## 他アプローチとの差別化

### vs Spec-Kit

- Spec-Kit: 何を作るか（WHAT）にフォーカス、詳細な仕様書で制御
- 本プロトコル: どう協働するか（関係性）にフォーカス、原則 + ガードレールで制御、ステートフルな状態管理

### vs 従来のSkill

- 従来のSkill: 手続きの塊、IF-THEN、ステートレス
- 本プロトコル: 状態 + 原則 + 対話、判断基準 + エスカレーション、ステートフル（LOG.md）

## 参照

- 詳細な出所タグ仕様: `SOURCE_TAGS.md`
- ふるまい原則の詳細: `BEHAVIOR.md`
- 要求→要件変換の詳細: `REQUIREMENTS.md`
- 用語の定義: `context/GLOSSARY.md`
- 決定履歴と保留事項: `context/LOG.md`
